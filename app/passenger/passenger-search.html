<h1>Passenger Search!</h1>

<form name="filterForm">
    <div class="form-group">
        <label>Name:</label>
        <input ng-model="vm.filterName" class="form-control" ng-change="vm.search(filterForm.$valid)" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 1000, 'blur': 0 } }">
    </div>

    <div class="form-group">
        <button ng-click="vm.search()" class="btn btn-primary">Search!</button>
    </div>
</form>


<table class="table table-striped" ng-show="vm.passengers.length > 0">
    <th>id</th>
    <th>first name</th>
    <th>name</th>
    <th>bonus miles</th>
    <th>status</th>
    <tr ng-repeat="r in vm.passengers" ng-class="{'active': r == vm.selection}">
        <td><a ui-sref="passengerEdit({id: r.id})">{{r.id}}</a></td>
        <td ng-bind="r.firstName" />
        <td ng-bind="r.name" />
        <td class="text-right" ng-bind="r.bonusMiles | number" />
        <td ng-bind-template="{{r.passengerStatus | passengerStatus :'short'}} - {{r.passengerStatus | passengerStatus :'long'}}" />
    </tr>
</table>




selected item: {{vm.selection}}
<div ng-repeat="r in vm.passengers" ng-class="{'active': r == vm.selection}">
    <passenger-card item="r" selection="vm.selection" selection-change="vm.selection = $event">plz transclude me</passenger-card>
</div>



<pre>
    Daten:
    --------------
{{vm.passengers | json}}
</pre>